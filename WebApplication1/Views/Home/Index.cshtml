@model WebApplication1.Models.ViewModels.DashboardViewModel
@{
    ViewData["Title"] = "Home Page";
}

<style>
    h1 {
        text-align: center;
    }

    hr {
        width: 70%;
        margin-left: auto;
        margin-right: auto;
    }

    #dashboard-container {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: center;
        width: 80%;
        margin-left: auto;
        margin-right: auto;
    }

    .dashboard-item-container {
        text-align: center;
        font-size: 30px;
        border: 1px solid #e6e6e6;
        border-radius: 8px;
        padding: 5%;
        margin: 3%;
    }

        .dashboard-item-container i {
            font-size: 300%;
        }

    #vote-button-container {
        display: flex;
        flex-direction: row;
        justify-content: end;
    }

        #vote-button-container a {
            font-size: 150%;
            animation-name: background-switch;
            animation-duration: 5s;
            animation-iteration-count: infinite;
            animation-direction: alternate;
            /*the above line makes the transition between one animation and its next smooth*/
        }

    @@keyframes background-switch {
        from {
            background-color: #212529;
            color: white;
        }

        to {
            background-color: white;
            color: #212529;
        }
    }

    #results-container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        text-align: center;
    }

    .one-result-container {
        text-align: center;
        font-size: 20px;
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center; /*in order to vertically center the cup icon*/
        width: 50%;
        margin-left: auto;
        margin-right: auto;
        margin-top: 1%;
        margin-bottom: 1%;
    }

        .one-result-container .rank-container {
            /*margin-left: 1%;
            margin-right: 1%;*/
            min-width: 50px;
        }

        .one-result-container .candidate-data-container {
            width: 250px;
        }

            .one-result-container .candidate-data-container p {
                margin-bottom: 0%;
                margin-top: 0%;
            }

        .one-result-container span {
            font-size: 250%;
        }


    .margins {
        margin-top: 3%;
        margin-bottom: 3%;
    }
</style>

<h1 class="margins">Welcome to Voting App</h1>
<hr />
@if (!@Model.UserHasVoted)
{
    <div id="vote-button-container">
        <a class="btn btn-default" asp-controller="Vote" asp-action="Index" title="Vote">
            Vote <i class="fa fa-chevron-right" aria-hidden="true"></i>
        </a>
    </div>
}

@if (@Model.UserHasVoted)
{
    int i = 0;
    <div id="results-container" class="margins">
        <h3 class="margins">Updated Results</h3>

        @foreach (var candidate in Model.Candidates)
        {
            i++;
            //so it is the first candidate, lets add the cup icon to it
            <div class="one-result-container">
                <div class="rank-container">
                    @if (i == 1)
                    {
                        <span><i class="fa fa-trophy" aria-hidden="true"></i></span>
                    }
                    else
                    {
                        <span>@i.ToString()</span>
                    }

                </div>
                <div class="candidate-data-container">
                    <p>@candidate.FirstName @candidate.LastName</p>
                    <p>@candidate.VotesCount Votes</p>
                </div>
            </div>
        }
    </div>
}

<div id="dashboard-container" class="margins">
    <div class="dashboard-item-container">
        <i class="fa fa-user" aria-hidden="true"></i>
        <p>@Model.NbCandidates Candidates</p>
    </div>
    <div class="dashboard-item-container">
        <i class="fa fa-users" aria-hidden="true"></i>
        <p>@Model.NbVoters Voters</p>
    </div>
    <div class="dashboard-item-container">
        <i class="fa fa-envelope" aria-hidden="true"></i>
        <p>@Model.NbVotes Votes</p>
    </div>
    <div class="dashboard-item-container">
        <i class="fa fa-pie-chart" aria-hidden="true"></i>
        <p>@Model.ParticipationRate.ToString("F2") %</p>
    </div>
</div>




