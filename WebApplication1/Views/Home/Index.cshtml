@*WE LOAD AN EMPTY VIEW THEN IT GETS FILLED USING JQUERY AJAX*@
@model WebApplication1.Models.ViewModels.DashboardViewModel

@{
    ViewData["Title"] = "Home";
    var BusinessMessage = (WebApplication1.Business.BusinessMessage)ViewBag.BusinessMessage;
    int futureElectionsCount = ViewBag.futureElectionsCount;
    int previousElectionsCount = ViewBag.previousElectionsCount;
}

<partial name="_dashboardStyle" />
<partial name="_datatablesStyle" />

<br />
<h1 class="margins text-center">Welcome to Voting App</h1>
<hr />
<br />
<div class="dashboard-holder">
    <div class="dashboard-left-side">
        <div id="current-election-area">
            <h3>Current Election</h3>
            <div class="spinner-border text-primary">

            </div>
        </div>

        <div class="margined-area" id="coming-elections-area">
            <h3>Future Elections</h3>
            <partial name="_downloadExcelStyle" />
            <form class="excel-downlod-container" asp-action="futureElections_ExportToExcel">
                <button type="submit" title="Download Excel File">
                    <i class="fa fa-file-excel-o" aria-hidden="true"></i> @futureElectionsCount rows
                </button>
            </form>
            <div class="spinner-border text-primary">

            </div>
            <table class="table" id="coming-elections-table">
                <thead>
                    <tr>
                        <th>
                            Name
                        </th>
                        <th>
                            StartDate
                        </th>
                        <th>
                            Duration (days)
                        </th>
                        <th>
                            Number of Candidates
                        </th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>

        <div class="margined-area" id="previous-elections-area">
            <h3>Previous Elections</h3>
            <form class="excel-downlod-container" asp-action="previousElections_ExportToExcel">
                <button type="submit" title="Download Excel File">
                    <i class="fa fa-file-excel-o" aria-hidden="true"></i> @previousElectionsCount rows
                </button>
            </form>
            <table class="table" id="previous-elections-table">
            </table>
        </div>

    </div>
    <div class="dashboard-right-side">
        <h2 class="text-center">Statistics</h2>
        <hr />
        @if (BusinessMessage != null)
        {
            <div class="text-center">
                @if (BusinessMessage.Type == "Error")
                {
                    <p class="text-danger">@BusinessMessage.Text</p>
                }
                else if (BusinessMessage.Type == "Warning")
                {
                    <p class="text-warning">@BusinessMessage.Text</p>
                }
                else if (BusinessMessage.Type == "Success")
                {
                    <p class="text-success">@BusinessMessage.Text</p>
                }
            </div>
        }
        else
        {
            <div class="dashboard-item-container">
                <i class="fa fa-university" aria-hidden="true"></i>
                <p>@Model.NbElections Elections</p>
            </div>
            <div class="dashboard-item-container">
                <i class="fa fa-id-card-o" aria-hidden="true"></i>
                <p>@Model.NbCandidates Candidates</p>
            </div>
            <div class="dashboard-item-container">
                <i class="fa fa-users" aria-hidden="true"></i>
                <p>@Model.NbVoters Voters</p>
            </div>
            <div class="dashboard-item-container">
                <i class="fa fa-envelope" aria-hidden="true"></i>
                <p>@Model.NbVotes Votes</p>
            </div>
        }

    </div>
</div>
<br />
<br />
<div id="election-results-container-parent" class="hidden_results_container">
    <div id="close-button-container">
        <span>
            <i class="fa fa-times" aria-hidden="true"></i>
        </span>
    </div>
    <p id="title">Results of the Election</p>

    <div id="election-results-container"></div>
</div>






<partial name="_jQuery" />
<script src="~/lib/jspdf/jspdf.min.js"></script>
<partial name="_pdfMakeScripts" />
<partial name="_datatablesScript" />
<partial name="_jQueryDatatablesInitialization" />
<partial name="_dashboardScript" />
<partial name="_redModalStyle" />
<partial name="_redModal" />